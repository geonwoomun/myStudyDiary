# 이해하기 쉬운 코드 작성 방법

## 왜 코드는 이해하기 쉬워야 할까?

우리는 코드를 작성하는 시간보다 코드를 보고 있는 시간이 대부분이다. 우리에게 시간은 유한하고 제한시간에 요구사항을 개발하는 게 하나의 목표이다. 그렇기 때문에 서비스를 운영하고 있는 재 사닝 또는 동료가 코드를 이해하는데 소비되는 시간을 최소화 해야한다.

## 코드를 완전히 이해한다는 것은 무엇을 의미할까?

코드를 이해한다는 것은 세가지를 충족했을 때를 의미한다.
1. 코드를 자유롭게 수정이 가능하다.
2. 버그를 짚어내는 것이 가능하다.
3. 수정된 내용이 작성한 다른 부분의 코드와 어떻게 상호작용 하는지를 알 수 있어야 한다.

### 네이밍

변수명/함수명/클래스명의 이름을 결정할 때는 항상 같은 원리가 적용된다. 이름은 일종의 설명문으로 간주해야한다. 적절한 이름을 붙일 수 있다는 것은 해당 요소가 바르게 이해되고 바르게 설계되어있다는 것이다.

효과적인 이름을 작성하기 위해서는 이러한 과정이 필요하다.

 - 이름은 효과와 목적을 설명하도록 한다.
 - 이름은 발음 가능한 것으로 한다.
 - 이름은 검색 가능하도록한다.

명명에는 이름 가역성이라는 개념이 있다. 이름이란 명명의 기반이 된 내용의 설명문을 복원할 수 있어야 한다는 명명 방침이다.


이름에 정보를 담아내려면 보편적인 단어를 피하고 구체적인 단어를 선택한다. 시간의 양이나 비이트의 수 길이 측정치를 포함한다면, 단위를 포함시킨다.
그리고 위험한 요소를 표현하여 나중에 잘못 이해했을 때 심각한 버그를 만들 가능성 있는 것들을 표현하는게 좋다.

약어와 축약형을 사용하는 것은 특정 프로젝트에 국한된 의미를 가지기 때문에 좋은 생각은 아니다. 새로 합류한 사람에게는 비밀스럽고 위협적인 모습이다. 팀에 새로 합류한 사람이 이름을 의미하는 바를 이해할 수 있을까를 기준으로 생각하는게 좋다.

#### 이름 포맷팅의로 의미전달.

클래스: PascalCase
변수, 함수, 메소드: camelCase
상수: CONSTANT_NAME

## 코드의 미학

미학적으로 보기 좋은 코드가 더 편리하다는 사실은 명백하다. 잘 생각해봄ㄴ 소비되는 시간이 코드를 바라보는 데 많이 소요된다. 코드를 훑어보는 데 걸리는 시간이 적을 수록, 사람들은 코드를 더 쉽게 사용할 수 있다.

일관성과 간결성을 위해서 줄바꿈을 재정렬
불규칙적으로 정의된 로직은 메소드를 활용하여 정렬
선언문을 블록으로 구성
추상화 수준 정리하기

## 논리 단순화

조건, 루프, 흐름을 통제하는 선언문은 코드를 복잡하게 만드는 원인이다. 코드를 읽을 때 다시 돌아가서 코드를 읽지 않아도 되게끔 만들어야한다.

조건문에서 인수의 순서
인수의 왼쪽은 질문을 받는 표현을 정의하고, 오른쪽에는 비교대상을 두는 것이 통계적으로 가독성이 더 좋다.

if else 블록의 순서
if/else를 사용하는 경우 부정이 아닌 긍정을 먼저 다루는게 좋다. 첫번째 블록을 생각할 때 한번 부정한 값을 생각해야 함으로 긍정부터 다루는 게 이해하기 쉽다.

중첩을 최소화하기
코드의 중첩이 심할 수록 코드를 읽는 사람의 마음속에 존재하는 정신적 스택에 추가적인 조건이 입력된다. 중첩을 제거하려면 함수 중간에 반환하기를 하여 제거할 수 있다.

거대한 구문 나누기
개별적인 표현은 그렇게 크지 않지만, 모두 한 곳에 있어서 코드를 읽는 사람의 머리를 강타하는 거대한 구문을 형성ㅇ한다. 다행히도 표현하는 많은 부분이 동일하다. 따라서 동일한 부분을 요약변수로 추출해서 함수의 앞부분에 놓아둘 수 있다.

드모르간의 법칙 활용하기


## 작은 것이 아름답다.

작은 소프트웨어는 단순하고 다루기 쉬우며 큰 소프트웨어보다 훨씬 뛰어나다. 따라서 소프트웨어는 작게 만들고 작게 유지하도록 한다.

작은 소프트웨어는 다음과 같은 장점이 있다.
1. 이해가 쉽다.
2. 수정이 쉽다.
3. 다른 소프트웨어와 조합하기 쉽다.

반면에 큰 소프트웨어는 다음과 같은 문제가 있다.

1. 복잡하고 코드를 이해하기 어렵다.
2. 예측하지 못하고 사태에 대응하기 힘들다.

설명 변수
커다란 표현을 쪼개는 가장 쉬운 방법은 작은 하위 표현을 담을 추가 변수를 만드는 것이다. 하위 표현의 의미를 설명하므로 설명 변수라고도 한다.

상관없는 하위문제 추출하기

엔지니어링은 커다란 문제를 작은 문제들로 쪼갠 다음, 각각의 문제에 대한 해결책을 구하고, 다시 하나의 해결책으로 맞추는 일련의 작업을 한다. 이러한 원리를 코드에 적용하면 코드가 더 튼튼해지며 가독성도 좋아진다. 큰 흐름과 관계가 적은 하위문제를 적극적으로 발견해서 추출하라는 것이다.

기존의 인터페이스를 단순화하기

라이브러리가 깔끔한 인터페이스를 제공하면 누구나 좋아한다. 하지만 자신이 사용하는 인터페이스가 깔끔하지 않다면 깔끔한 덮개로 보완할 수 있다.

예를 들어 자바스크립트가 브라우저 쿠키를 다루는 방식은 전혀 이상적이지 않다. 개념적으로 보면 쿠키는 이름/값 짝으로 이루어진다. 브라우저가 제공하는 인터페이스는 다음과 같은 문법으로 된 하나의 document.cookie를 사용한다.
name1=value1; name2=value2;

필요한 쿠키를 찾으려면 이 거대한 문자열의 구문분석을 직접 수행해야한다. 지저분한 코드가 되니까 getCookie라는 함수로만든다.

이상적이지 않은 인터페이스를 그냥 받아들일 이유가 없다. 이런 인터페이스가 있으면 언제나 이를 둘러싸는 함수를 작성하여 지저분한 내부를 감출 수 있다.


## 테스트 코드

테스트 코드가 읽기 쉬워야한다는 점은 테스트와 상관없는 실제 코드와 마찬가지로 중요하다. 다른 프로그래머는 종종 테스트 코드를 실제 코드가 어떻게 동작하며 어떻게 사용되어야 하는지에 관한 비공식적인 문서라고 생각한다. 따라서 테스트 코드가 읽기 쉬우면 사용자는 실제 코드가 어떻게 동작하는지 그만큼 더 쉽게 이해할 수 있다.

명세 기반 테스트 기법 종류

동등분할
테스트 대상 데이터의 구간을 일정 간격으로 분할하여 케이스를 구성한다. 보통 데이터의 구간에 중간값을 대표값으로 사용한다.

경계값 분석
분기 또는 반복 구문의 경계 값을 기준으로 케이스를 구성한다. min, min+, normal, max-, max 다섯경우의 케이스로 구성한다.

결정테이블
조건과 행위를 테이블로 구성하여 케이스 및 절차를 구성한다. 프로세스 수행 중 요구되는 결정 또는 조건과 프로세스와 관련된 모든 동작을 기술한다.

조합
테스트하는 데 필요한 값이 다른 파라미터의 값과 최소한 한 번씩은 조합을 하여 케이스를 구성한다. 대부분의 결함이 두 개 요소의 상호작용에 기인한다는 것에 착안하여, 두 개 요소의 모든 조합을 다룬다.

상태전이 시스템의 각 상태를 중심으로 도출하고 전이 상태를 절차로 구성한다. 객체의 상태를 구분하고 이벤트에 의해 어느 한 상태에서 다른 상태로 전이되는 경우의 수를 테스트 케이스로 구성한다. 상태 머신을 사용하는 UI 컴포넌트 테스트 시 유용하다.

## 함수형 프로그래밍

프로젝트를 운영하면서 기능이 추가되면 코드가 복잡해지지 않게 해야한다. 복잡성을 다스리는 비결은 코드베이스의 크기가 커질수록 복잡성이 증가하지 않도록 붙잡아 두는 것이다. 바로 여기서 함수형 프로그래밍이 요긴하게 쓰인다.

#### 함수형 프로그래밍이란?

함수형 프로그래밍은 추상화 단위를 함수로한다. 함수들을 조립해서 고수준의 동작을 구현한다. 자료구조를 새로 만들어 어떤 요건을 충족시키는 게아니라, 배열/객체/문자열 등의 흔한 자료구조를 이용해 문제를 해결한다.

함수형 프로그래밍에서 함수는 수학적 함수를 의미한다. 수학적 함수는 입력과 출력이 모두 존재해야하고, 입력에 따른 출력은 항상 동일하게 대응되어야한다.

함수형 프로그래밍에서는 관찰할 수 있는 상태변화를 최소화하려고 애쓴다. 따라서 함수형 원칙을 고수하는 시스템에 새로운 기능을 추가할 때는 새로운 함수가 지역화되고 비파괴적인 데이터 전이 과정에서 어떻게 동작할 것인지를 파악하는 것이 핵심이다.
실용적인 함수형 프로그래밍은 어떤 시스템에서 상태 변화를 완전히 제거하는 것이 아니라 변이가 발생하는 지역을 가능한 최소화하는 것을 목표로 한다.

순수함수는 동일한 인자에 상응하는 동일한 리턴값을 가지는 함수이다.

모든 것을 함수로 생각한다.
함수형 프로그래밍은 애플리케이션, 함수의 구성요소, 더 나아가서 언어 자체를 함수처럼 여기도록 만들고, 이러한 함수 개념을 가장 우선순위 놓는다. 함수형 사고방식은 문제의 해결 방법을 동사들로 구성하는 것.

응용형 함수를 통해 다형성 만들기
응용형 함수는 인자로 받은 함수가 알고 있는 인자를 해당 함수에게 평가받아 로직을 완성해나가는 것을말한다. map, filter와 같은 함수가 응용형 함수라고 한다. 어떠한 데이터 형태인지 관심이 분리가 되고 다형성을 사용할 수 있기 때문에 재사용성이 높아진다.

값 대신 함수를 사용하라.

명령형 프로그램은 작업 수행에 필요한 전 단계를 노출하여 흐름이나 경로를 아주 자세히 서술한다. 보통 작업을 수행하는 단계는 루프와 분기문, 구문마다 값이 바뀌는 변수들로 빼곡히 들어찬다.

반ㄴ면, 선언적 프로그래밍은, 특히 함수형 프로그래밍은 독립적인 블랙박스 연산들이 단순하게, 즉 최소한의 제어 구조를 통해 연결되어 추상화 수준이 높다. 실제로 함수형 프로그램은 데이터와 제어흐름 자체를 고수준 컴포넌트 사이의 단순한 연결로 취급한다.


추상화 도구 클로저
클로저는 나중에 사용할 목적으로 정의된 스코프에 포함된 외부 바인딩을 캡쳐하는 하뭇다. 클로저는 비공개 접근을 제공할 뿐만 아니라 추상화 기법도 제공한다.

커링
다인자 함수의 각각의 논리적 인자에 대응하는 새로운 함수를 반환하는 함수를 커리 함수라고한다. 

부분적용
부분적용은 부분적으로 실행을 마친 다음에 나머지 인자에 함께 즉시 실행한 상태가 되는 함수다.